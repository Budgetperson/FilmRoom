'use strict';

var _interopRequireWildcard = function (obj) { return obj && obj.__esModule ? obj : { 'default': obj }; };

Object.defineProperty(exports, '__esModule', {
  value: true
});
exports['default'] = IsomorphicRenderer;
/**
 * IsomorphicRenderer(alt: AltInstance, App: ReactElement): mixed
 *
 * > The glue that it takes to render a react element isomorphically
 *
 * ** This util depends on iso and react **
 *
 * Usage:
 *
 * ```js
 * var IsomorphicRenderer = require('alt/utils/IsomorphicRenderer');
 * var React = require('react');
 * var Alt = require('alt');
 * var alt = new Alt();
 *
 * var App = React.createClass({
 *   render() {
 *     return (
 *       <div>Hello World</div>
 *     );
 *   }
 * });
 *
 * module.exports = IsomorphicRenderer(alt, App);
 * ```
 */

var _Iso = require('iso');

var _Iso2 = _interopRequireWildcard(_Iso);

var _React = require('react');

var _React2 = _interopRequireWildcard(_React);

function IsomorphicRenderer(alt, App) {
  /*eslint-disable */
  if (typeof window === 'undefined') {
    /*eslint-enable */
    return function () {
      var app = _React2['default'].renderToString(_React2['default'].createElement(App));
      var markup = _Iso2['default'].render(app, alt.takeSnapshot());
      alt.flush();
      return markup;
    };
  } else {
    _Iso2['default'].bootstrap(function (state, _, node) {
      var app = _React2['default'].createElement(App);
      alt.bootstrap(state);
      _React2['default'].render(app, node);
    });
  }
}

module.exports = exports['default'];